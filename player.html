<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Football_Record_Statistics">
<meta name="author" content="LoonyHyun">
<meta property="og:url" content="https://loonyhyun.cafe24.com/">
<meta property="og:title" content="바론 FC 경기 기록실">
<meta property="og:type" content="website">
<meta property="og:image" content="https://loonyhyun.cafe24.com/football_tpm/img/main.png">
<meta property="og:description" content="바론 FC의 경기 기록실 입니다.">
<title>선수 정보</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<script src="./bootstrap-datepicker.min.js"></script>
<script src="./bootstrap-datepicker.ko.min.js"></script>
<link href="./bootstrap-datepicker.min.css" rel="stylesheet">

<script src="./team.js"></script>
<link href="./team.css" rel="stylesheet">

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1427445728121282"
crossorigin="anonymous"></script>

<script>
    
	$(document).ready(function(){
		$("#headers").load("./header.html", function(){
			var target_header = "5";
			getTeam();
			$("#header_" + target_header).addClass("text-warning").removeClass("text-white");
			$("#drop_header").text($("#drop_header_" + target_header).text());
		});
		getPlayers();
		setLayout();
    });
	$(window).resize(function(){
		setLayout();
	});

    function getPlayers()
    {
        
        $.ajax({
            type : "post",
            url : './get.php',
            data : {
                cmd : "players",
                id : 1
            },
            dataType : "json",
            success : function(data) {
                $("#playerTbody").html("");
                for (var i = 0; i < data.length; i++) {
                    var playerId = data[i]["player_id"];
                    var str = "<tr id='player_"+playerId+"' data-bs-toggle=\"modal\" data-bs-target=\"#updatePlayerDiv\" onclick=\"updatePlayerInfo('"+playerId+"');\" >";
                    str += "  <td>"+(i+1)+"</td>";
                    str += "  <td>"+data[i]["player_name"]+"</td>";
                    str += "  <td>"+data[i]["back_no"]+"</td>";
                    str += "  <td>"+data[i]["position"]+"</td>";
                    str += "</tr>";
                    str += "<tr>";
                    str += "  <td> </td>";
                    str += "  <td colspan='3'><pre>"+data[i]["desc"]+"</pre></td>";
                    str += "</tr>";
                    $("#playerTbody").append(str);
                }
            },
            error : function(err) {
                alert("오류발생 관리자에게 문의하세요.")
            }
        });
    }

    function searchTablePlayers() {
		var tmp = $("#searchPlayerName").val();
		
        var chk = false;
		$("#playerTbody > tr").each(function(){
            if(parseInt($(this).children().eq(0).text()) > 0){
                if($(this).children().eq(1).text().indexOf(tmp) > -1){
                    $(this).show();
                    chk = true;
                }else{
                    $(this).hide();
                    chk = false;
                }
            }else{
                if(chk){
                    $(this).show();
                    chk = false;
                }
                else{
                    $(this).hide();
                    chk = false;
                }
            }
		});
	}

</script>
</head>
<body>
    <div id="headers"></div>
	<div class="container">
        
		<table class="table auto_font_size" id="PlayerMainTable">
			<caption style="caption-side: top;">
				테이블 검색: <input type="text" id="searchPlayerName" value="" onkeyup="searchTablePlayers();"/>
			</caption>
            <colgroup>
                <col width="25%"/>
                <col width="25%"/>
                <col width="25%"/>
                <col width="25%"/>
            </colgroup>
			<thead>
				<tr>
					<th scope="col">#</th>
					<th scope="col">이름</th>
					<th scope="col">등번호</th>
					<th scope="col">포지션</th>
				</tr>
			</thead>
			<tbody id="playerTbody"></tbody>
		</table>


		<div id='footers'></div>
    </div>        
</body>
</html>