<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Football_Record_Statistics">
<meta name="author" content="LoonyHyun">
<meta property="og:url" content="https://loonyhyun.cafe24.com/">
<meta property="og:title" content="바론 FC 경기 기록실">
<meta property="og:type" content="website">
<meta property="og:image" content="https://loonyhyun.cafe24.com/football_tpm/img/main.png">
<meta property="og:description" content="바론 FC의 경기 기록실 입니다.">
<title>경기 기록</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<script src="./bootstrap-datepicker.min.js"></script>
<script src="./bootstrap-datepicker.ko.min.js"></script>
<link href="./bootstrap-datepicker.min.css" rel="stylesheet">

<script src="./team.js"></script>
<link href="./team.css" rel="stylesheet">
<style>
	.tr-height-set tr {
		height:80px;
	}
	.tr-height-set td {
		border: 1px solid;
	}
	.table-position {
		cursor: pointer;
	}

	.btn-circle.btn-xl {
		width: 70px;
		height: 70px;
		padding: 10px 16px;
		border-radius: 35px;
		/* font-size: 24px; */
		line-height: 1.33;
	}

	.btn-circle {
		width: 30px;
		height: 30px;
		padding: 6px 0px;
		border-radius: 15px;
		text-align: center;
		font-size: 12px;
		line-height: 1.42857;
		margin:10px 10px;
	}

	.TeamAreaBackground {
		background-image: url(./ground.jpg);
		background-repeat: no-repeat;
    	background-size: contain;
	}

	.TeamArea {
		width: 100%; height: 60px;
		text-align: center;
		margin-bottom: 10px;
	}

	.btn-teamA {
		position: absolute;
	}
	.btn-teamB {
		position: absolute;
	}
</style>
<script>
    
	$(document).ready(function(){
		$("#headers").load("./header.html", function(){
			getTeam();
			$("#header_6").addClass("text-warning").removeClass("text-white");
		});
		setLayout();

		$(".table-position").each(function(){
			$(this).click(function(){
				setPostionUse(this);
			});
		})

		var btnoption = " btn-xl ";
		console.log($(window).width())
		if($(window).width() < 750){
			btnoption = "";
		}
		/*
		for(var i=0; i<11; i++){
			var str = "<button type=\"button\" class=\"btn btn-danger btn-circle " + btnoption + " btn-teamA\" "
			+ "draggable=\"true\" ondragstart=\"dragstart(event, this)\" id='btn-circle-A-"+i+"'>T</button>";
			var str2 = "<button type=\"button\" class=\"btn btn-info btn-circle " + btnoption + " btn-teamB\" "
			+ "draggable=\"true\" ondragstart=\"dragstart(event, this)\" id='btn-circle-B-"+i+"'>T</button>";
			
			$("#TeamAreaA").append(str);
			$("#TeamAreaB").append(str2);
		}
		*/

    });
	$(window).resize(function(){
		setLayout();
	});

	var pIdx = 0;
	function funcAddPlayer(team){
		var btnoption = " btn-xl ";
		if($(window).width() < 750){
			btnoption = "";
		}
		var str = "<button type=\"button\" class=\"btn btn-danger btn-circle " + btnoption + " btn-teamA\" "
			+ "draggable=\"true\" ondragstart=\"dragstart(event, this)\" id='btn-circle-A-"+pIdx+"'>"+$("#tmpPlayerNameInput").val()+"</button>";
		var str2 = "<button type=\"button\" class=\"btn btn-info btn-circle " + btnoption + " btn-teamB\" "
			+ "draggable=\"true\" ondragstart=\"dragstart(event, this)\" id='btn-circle-B-"+pIdx+"'>"+$("#tmpPlayerNameInput").val()+"</button>";
		
		if(team == 'a'){
			$("#TeamAreaA").append(str);
		}else if(team == 'b'){
			$("#TeamAreaB").append(str2);
		}
		pIdx++;
	}

	var selector = null;
	function dragstart(event, obj) {
		posX = event.pageX;
		posY = event.pageY;
		distX = event.srcElement.offsetLeft - posX;
		distY = event.srcElement.offsetTop - posY;
		
		selector = obj;
	}
	function dragover(evnet) {
		event.stopPropagation();
		event.preventDefault();
	}

	function drop(event) {
		event.stopPropagation();
		event.preventDefault();
		posX = event.pageX;
		posY = event.pageY;
		console.log(event)
		console.log(posX, posY, distX, distY);
		$(selector).css('margin-left', posX + distX + 'px')
			.css('margin-top', posY + distY + 'px');
	}
</script>
</head>
<body>
    <div id="headers"></div>
	<div class="container">
		<div class="row">&nbsp;</div>
		<div class="row">
			<div class="col-md-4">
				<input type="text" class="form-control" id="tmpPlayerNameInput" value="" />
			</div>
			<div class="col-md-4">
				<button type="button" class="btn btn-danger" onclick="funcAddPlayer('a');">A추가</button>
				<button type="button" class="btn btn-primary" onclick="funcAddPlayer('b');">B추가</button>
			</div>
		</div>
		<div class="row">
			<table class="table auto_font_size">
				<caption style="caption-side: top; font-weight: bold; color:black;">
					포지션 설정
				</caption>
				<colgroup>
					<col width="25%"/>
					<col width="25%"/>
				</colgroup>
				<thead>
					<tr>
						<th scope="col" style="background-color:#ffa2a2;">A팀 (RED)</th>
						<th scope="col" style="background-color:#9d9dff;">B팀 (BLUE)</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="td-height-set TeamAreaBackground">
							<div class="" id="TeamAreaA"  ondrop="drop(event)" ondragover="dragover(event)"
							style="width:100%; height:758px; position:relative;"></div>
						</td>
						<td class="td-height-set TeamAreaBackground">
							<div class="" id="TeamAreaB"  ondrop="drop(event)" ondragover="dragover(event)"
							style="width:100%; height:758px; position:relative;"></div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>


		<div id='footers'></div>
    </div>
	
</body>
</html>